var A=Object.defineProperty,R=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var I=(n,e,t)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,d=(n,e)=>{for(var t in e||(e={}))U.call(e,t)&&I(n,t,e[t]);if(k)for(var t of k(e))j.call(e,t)&&I(n,t,e[t]);return n},P=(n,e)=>R(n,$(e));var Y=(n,e,t)=>new Promise((y,c)=>{var o=u=>{try{r(t.next(u))}catch(f){c(f)}},a=u=>{try{r(t.throw(u))}catch(f){c(f)}},r=u=>u.done?y(u.value):Promise.resolve(u.value).then(o,a);r((t=t.apply(n,e)).next())});import{b0 as E,d as O,b1 as q,r as M,a3 as S,j as m,o as z,c as F,aB as G,w as g,a as C,k as L,au as X,aA as V,i as J,aw as K,aM as Q,p as Z,a9 as ee,aR as te,a1 as oe,ae as ne,aY as se}from"./index.1ba1d443.js";import{a as ae}from"./index.esm.f1daf582.js";const le=P(d({},E.props),{subBtuText:{type:String,default:"\u786E\u8BA4"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),p=function(n,e){var t;return n.currentStyle?n.currentStyle[e]:(t=document.defaultView)==null?void 0:t.getComputedStyle(n,null)[e]},l={left:0,top:0,currentX:0,currentY:0,flag:!1},ue=function(n,e,t){const y=document.body.clientWidth,c=document.documentElement.clientHeight,o=e.offsetWidth,a=e.offsetHeight,r=e.offsetLeft,u=e.offsetTop,f=y-r-o,v=c-u-a;p(e,"left")!=="auto"&&(l.left=p(e,"left")),p(e,"top")!=="auto"&&(l.top=p(e,"top")),n.onmousedown=function(i){l.flag=!0,i||(i=window.event,n.onselectstart=function(){return!1});const _=i;l.currentX=_.clientX,l.currentY=_.clientY},document.onmouseup=function(){l.flag=!1,p(e,"left")!=="auto"&&(l.left=p(e,"left")),p(e,"top")!=="auto"&&(l.top=p(e,"top"))},document.onmousemove=function(i){const _=i||window.event;if(l.flag){const h=_.clientX,x=_.clientY,w=h-l.currentX,B=x-l.currentY;let b=parseInt(l.left)+w,s=parseInt(l.top)+B;return-b>r?b=-r:b>f&&(b=f),-s>u?s=-u:s>v&&(s=v),e.style.left=b+"px",e.style.top=s+"px",typeof t=="function"&&t((parseInt(l.left)||0)+w,(parseInt(l.top)||0)+B),i.preventDefault&&i.preventDefault(),!1}}};const ce={class:"w-full cursor-move",id:"basic-modal-bar"},de=O({__name:"basicModal",props:d({},le),emits:["on-close","on-ok","register"],setup(n,{emit:e}){const t=n,y=q(),c=M(null),o=M(!1),a=M(!1),r=S(()=>d(d({},t),m(c))),u=S(()=>{const{subBtuText:s}=c.value;return s||t.subBtuText});function f(s){return Y(this,null,function*(){c.value=te(m(c)||{},s)})}const v=S(()=>d(d(d({},y),m(r)),m(c)));function i(s){a.value=s}function _(){o.value=!0,oe(()=>{const s=document.getElementById("basic-modal"),D=document.getElementById("basic-modal-bar");ue(D,s)})}function h(){o.value=!1,a.value=!1,e("on-close")}function x(){o.value=!1,e("on-close")}function w(){a.value=!0,console.log(a.value),e("on-ok")}const B={setProps:f,openModal:_,closeModal:h,setSubLoading:i};return Q()&&e("register",B),(s,D)=>{const T=Z,H=ee,N=E;return z(),F(N,K({id:"basic-modal"},m(v),{show:o.value,"onUpdate:show":D[0]||(D[0]=W=>o.value=W),onClose:x}),G({header:g(()=>[J("div",ce,X(m(v).title),1)]),default:g(()=>[V(s.$slots,"default")]),_:2},[s.$slots.action?{name:"action",fn:g(()=>[V(s.$slots,"action")]),key:"1"}:{name:"action",fn:g(()=>[C(H,null,{default:g(()=>[C(T,{onClick:h},{default:g(()=>[L("\u53D6\u6D88")]),_:1}),C(T,{type:"primary",loading:a.value,onClick:w},{default:g(()=>[L(X(m(u)),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});function pe(n){const e=M(null),t=()=>{const o=m(e.value);return o||console.error("useModal instance is undefined!"),o};return[o=>{ae(()=>{e.value=null}),e.value=o,ne(()=>n,()=>{n&&o.setProps(se(n))},{immediate:!0,deep:!0})},{setProps:o=>{var a;(a=t())==null||a.setProps(o)},openModal:()=>{var o;(o=t())==null||o.openModal()},closeModal:()=>{var o;(o=t())==null||o.closeModal()},setSubLoading:o=>{var a;(a=t())==null||a.setSubLoading(o)}}]}export{de as _,pe as u};
